package ejerciciosT1;

import java.io.EOFException;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;

import com.thoughtworks.xstream.XStream;

public class Ejercicio9 {

	public static void main(String[] args) {
		try{
			File f = new File("/home/glyaxz/Escritorio/FichData.dat");
			FileInputStream filein = new FileInputStream(f);
			ObjectInputStream dataIS = new ObjectInputStream(filein);
			
			ListPersona lp = new ListPersona();
			
			try {
				while(true) {
					Persona persona = (Persona) dataIS.readObject();
					lp.add(persona);
				}
			}catch(EOFException e) {
				System.out.println(e.getMessage());
			}
			dataIS.close();
			
			try {
				XStream xs = new XStream();
				xs.alias("ListaPersonasMunicipio", ListPersona.class);
				xs.alias("DatosPersona", Persona.class);
				
				xs.addImplicitCollection(ListPersona.class, "lista");
				xs.toXML(lp, new FileOutputStream("/home/glyaxz/Escritorio/Testing/FichPers.xml"));
				System.out.println("Fichero exportado.");
				
			}catch(Exception p){
				System.out.println(p.getMessage());
			}
			
			
			
		}catch (ClassNotFoundException|IOException e) {
			System.out.println(e.getMessage());
		}
	}
}
